<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Bowl LX Tracker</title>
    <style>
        :root {
            --bg-dark: #05162e;
            --card-bg: #0d213f;
            --accent-green: #69BE28;
            --accent-red: #C60C30;
            --text-main: #e0e6ed;
            --border: #1a3a5f;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Banner - Updated to 300px */
        .banner {
            width: 100%;
            height: 300px;
            background: url('banner.jpg') no-repeat center center;
            background-size: cover;
        }

        .status-bar {
            width: 90%;
            max-width: 1000px;
            display: flex;
            justify-content: flex-end;
            padding: 15px 0;
        }

        .refresh-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            color: white;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Scoreboard Card */
        .card {
            background: var(--card-bg);
            width: 90%;
            max-width: 800px;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            text-align: center;
            border: 1px solid var(--border);
        }

        .scores-display {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom: 30px;
        }

        .team-score { font-size: 4rem; font-weight: 800; margin: 10px 0; }
        .seahawks-color { color: var(--accent-green); }
        .patriots-color { color: var(--accent-red); }

        .qtr-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .qtr-box {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border);
            padding: 15px;
            border-radius: 10px;
        }

        /* Grid Section */
        .grid-container {
            margin-top: 40px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .grid-wrapper { display: flex; align-items: center; }

        .patriots-side-label {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            padding-right: 20px;
            color: var(--accent-red);
            font-weight: bold;
            font-size: 1.1rem;
            text-transform: uppercase;
        }

        table { border-spacing: 4px; }

        /* Squares 20% Smaller & Centered Content */
        td {
            width: 52px;
            height: 52px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.65rem;
            text-align: center;
            /* Flex centering for the + symbol */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }

        td:hover { background: rgba(255,255,255,0.1); border-color: var(--accent-green); }

        .active-winner {
            background: #2a4d1a !important;
            border: 2px solid var(--accent-green) !important;
            box-shadow: 0 0 15px var(--accent-green);
        }

        .num-header { color: var(--accent-green); font-weight: bold; width: 52px; display: table-cell; }
        .side-header { color: var(--accent-red); font-weight: bold; }

        .log-controls { margin-top: 20px; }
        .btn-log { background: transparent; border: 1px solid var(--border); color: #8899ac; padding: 5px 10px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>

<div class="banner"></div>

<div class="status-bar">
    <button class="refresh-btn" onclick="fetchLiveScores()">üîÑ Update Scores</button>
</div>

<div class="card">
    <div class="scoreboard-title">üèÜ SCOREBOARD üèÜ</div>
    <div class="scores-display">
        <div>
            <div style="font-size: 0.8rem; color: var(--accent-green);">SEAHAWKS</div>
            <div class="team-score seahawks-color" id="score-home">0</div>
        </div>
        <div style="font-size: 2rem; opacity: 0.5;">-</div>
        <div>
            <div style="font-size: 0.8rem; color: var(--accent-red);">PATRIOTS</div>
            <div class="team-score patriots-color" id="score-away">0</div>
        </div>
    </div>

    <div class="qtr-row">
        <div class="qtr-box"><div>Q1</div><div id="q1-score">--</div></div>
        <div class="qtr-box"><div>Q2</div><div id="q2-score">--</div></div>
        <div class="qtr-box"><div>Q3</div><div id="q3-score">--</div></div>
        <div class="qtr-box"><div>Q4</div><div id="q4-score">--</div></div>
    </div>

    <div class="log-controls">
        <span style="font-size: 0.8rem; color: #8899ac;">Log Quarter End:</span>
        <button class="btn-log" onclick="logQuarter(1)">Q1</button>
        <button class="btn-log" onclick="logQuarter(2)">Q2</button>
        <button class="btn-log" onclick="logQuarter(3)">Q3</button>
        <button class="btn-log" onclick="logQuarter(4)">Q4</button>
    </div>
</div>

<div class="grid-container">
    <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 10px;">NFC - SEAHAWKS</div>
    <div class="grid-wrapper">
        <div class="patriots-side-label">AFC - PATRIOTS</div>
        <table id="mainGrid"></table>
    </div>
</div>

<script>
    let entries = JSON.parse(localStorage.getItem('sb_entries_v3')) || {};
    let scores = JSON.parse(localStorage.getItem('sb_scores_v3')) || {h: 0, a: 0, q1:'--', q2:'--', q3:'--', q4:'--'};

    async function fetchLiveScores() {
        try {
            const res = await fetch('https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard');
            const data = await res.json();
            const game = data.events.find(e => e.shortName.includes('SEA') && e.shortName.includes('NE'));
            if (game) {
                scores.h = parseInt(game.competitions[0].competitors.find(t => t.team.abbreviation === 'SEA').score);
                scores.a = parseInt(game.competitions[0].competitors.find(t => t.team.abbreviation === 'NE').score);
                localStorage.setItem('sb_scores_v3', JSON.stringify(scores));
                updateUI();
            }
        } catch (e) { console.warn("Score sync unavailable."); }
    }

    function updateUI() {
        document.getElementById('score-home').innerText = scores.h;
        document.getElementById('score-away').innerText = scores.a;
        document.getElementById('q1-score').innerText = scores.q1;
        document.getElementById('q2-score').innerText = scores.q2;
        document.getElementById('q3-score').innerText = scores.q3;
        document.getElementById('q4-score').innerText = scores.q4;
        renderGrid();
    }

    function renderGrid() {
        const table = document.getElementById('mainGrid');
        let html = '<tr><td></td>';
        for(let i=0; i<10; i++) html += `<td class="num-header">${i}</td>`;
        html += '</tr>';

        for(let r=0; r<10; r++) {
            html += `<tr><td class="side-header">${r}</td>`;
            for(let c=0; c<10; c++) {
                const key = `${r}-${c}`;
                const name = entries[key] || '+';
                const isWinner = (scores.h % 10 === c && scores.a % 10 === r);
                html += `<td class="${isWinner ? 'active-winner' : ''}" onclick="addName('${r}','${c}')">${name}</td>`;
            }
            html += '</tr>';
        }
        table.innerHTML = html;
    }

    function addName(r, c) {
        const name = prompt("Enter name for this square:");
        if (name !== null) {
            entries[`${r}-${c}`] = name;
            localStorage.setItem('sb_entries_v3', JSON.stringify(entries));
            renderGrid();
        }
    }

    function logQuarter(q) {
        scores[`q${q}`] = `${scores.h}-${scores.a}`;
        localStorage.setItem('sb_scores_v3', JSON.stringify(scores));
        updateUI();
    }

    window.onload = () => { updateUI(); fetchLiveScores(); };
</script>
</body>
</html>
