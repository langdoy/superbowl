<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Bowl LX Tracker</title>
    <style>
        :root {
            --bg: #05162e; --card: #0d213f; --green: #69BE28;
            --red: #C60C30; --text: #e0e6ed; --border: #1a3a5f;
        }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; align-items: center; }
        
        /* Banner - 300px Height */
        .banner { width: 100%; height: 300px; background: url('banner.png') no-repeat center center; background-size: cover; border-bottom: 4px solid var(--green); }

        .refresh-btn { background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: white; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        
        /* Scoreboard */
        .card { background: var(--card); width: 90%; max-width: 600px; border-radius: 12px; padding: 20px; text-align: center; border: 1px solid var(--border); margin: 20px 0; }
        .score-row { display: flex; justify-content: space-around; align-items: center; font-size: 3rem; font-weight: bold; }
        .team-label { font-size: 0.8rem; color: #8899ac; margin-bottom: 5px; }
        
        .qtr-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 20px; }
        .qtr-box { background: rgba(0,0,0,0.2); padding: 10px; border-radius: 6px; border: 1px solid var(--border); font-size: 0.8rem; }

        /* Grid - Table Layout to prevent vertical stacking */
        .grid-wrapper { display: flex; align-items: center; margin-top: 20px; }
        .patriots-side { writing-mode: vertical-rl; transform: rotate(180deg); color: var(--red); font-weight: bold; padding: 15px; text-transform: uppercase; font-size: 1.1rem; }
        
        table { border-collapse: collapse; background: rgba(255,255,255,0.02); table-layout: fixed; }
        td { 
            width: 52px; height: 52px; border: 1px solid var(--border); 
            text-align: center; font-size: 0.65rem; color: white;
            display: table-cell; vertical-align: middle; /* Forces grid structure */
        }
        .num-header { color: var(--green); font-weight: bold; }
        .side-header { color: var(--red); font-weight: bold; }
        .active-winner { background: #2a4d1a !important; border: 2px solid var(--green) !important; box-shadow: 0 0 10px var(--green); }
        .plus { font-size: 1.2rem; opacity: 0.4; pointer-events: none; }
    </style>
</head>
<body>

<div class="banner"></div>

<button class="refresh-btn" onclick="fetchScores()">ðŸ”„ Update Scores</button>

<div class="card">
    <div class="score-row">
        <div><div class="team-label" style="color:var(--green)">SEAHAWKS</div><span id="h">0</span></div>
        <div style="font-size: 1.2rem; opacity: 0.3;">VS</div>
        <div><div class="team-label" style="color:var(--red)">PATRIOTS</div><span id="a">0</span></div>
    </div>
    <div class="qtr-grid">
        <div class="qtr-box">Q1<br><span id="q1">--</span></div>
        <div class="qtr-box">Q2<br><span id="q2">--</span></div>
        <div class="qtr-box">Q3<br><span id="q3">--</span></div>
        <div class="qtr-box">Q4<br><span id="q4">--</span></div>
    </div>
    <div style="margin-top: 15px; font-size: 0.75rem;">
        Log: 
        <button onclick="log(1)">Q1</button><button onclick="log(2)">Q2</button>
        <button onclick="log(3)">Q3</button><button onclick="log(4)">Q4</button>
    </div>
</div>

<div style="color:var(--green); font-weight:bold; margin-bottom:10px;">NFC - SEAHAWKS</div>
<div class="grid-wrapper">
    <div class="patriots-side">AFC - PATRIOTS</div>
    <table id="grid"></table>
</div>

<script>
    let entries = JSON.parse(localStorage.getItem('sb_v5_e')) || {};
    let scores = JSON.parse(localStorage.getItem('sb_v5_s')) || {h:0, a:0, q1:'--', q2:'--', q3:'--', q4:'--'};

    async function fetchScores() {
        try {
            const r = await fetch('https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard');
            const d = await r.json();
            const g = d.events.find(e => e.shortName.includes('SEA') && e.shortName.includes('NE'));
            if (g) {
                scores.h = parseInt(g.competitions[0].competitors.find(t=>t.team.abbreviation==='SEA').score);
                scores.a = parseInt(g.competitions[0].competitors.find(t=>t.team.abbreviation==='NE').score);
                save();
            }
        } catch(e) {}
    }

    function save() {
        localStorage.setItem('sb_v5_s', JSON.stringify(scores));
        update();
    }

    function update() {
        document.getElementById('h').innerText = scores.h;
        document.getElementById('a').innerText = scores.a;
        ['q1','q2','q3','q4'].forEach(q => document.getElementById(q).innerText = scores[q]);
        render();
    }

    function render() {
        let h = '<tr><td></td>';
        for(let i=0; i<10; i++) h += `<td class="num-header">${i}</td>`;
        h += '</tr>';
        for(let r=0; r<10; r++) {
            h += `<tr><td class="side-header">${r}</td>`;
            for(let c=0; c<10; c++) {
                let name = entries[`${r}-${c}`] || '<span class="plus">+</span>';
                let win = (scores.h % 10 === c && scores.a % 10 === r);
                h += `<td class="${win ? 'active-winner':''}" onclick="add('${r}','${c}')">${name}</td>`;
            }
            h += '</tr>';
        }
        document.getElementById('grid').innerHTML = h;
    }

    function add(r, c) {
        let n = prompt("Enter Name:");
        if(n !== null) { entries[`${r}-${c}`] = n; localStorage.setItem('sb_v5_e', JSON.stringify(entries)); render(); }
    }

    function log(q) { scores[`q${q}`] = `${scores.h}-${scores.a}`; save(); }

    window.onload = update;
</script>
</body>
</html>
